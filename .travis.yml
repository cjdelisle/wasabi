language: node_js
branches:
  only:
    - master
node_js:
  - "9.3.0"
apt:
  packages:
    - linux-headers-generic
install:
  - echo "Don't do npm-install until after generating the syscalls"
script:
  - node ./syscall_tbl/syscall.js /usr/src/linux-headers-`uname -r` > ./syscall_autogenerated.h
  - npm install
  - node ./hello.js
  - npm run-script lint:js # code quality check
  - npm run-script flow # code quality check
