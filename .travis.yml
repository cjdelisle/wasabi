language: node_js
branches:
  only:
    - master
node_js:
  - "9.3.0"
addons:
  apt:
    packages:
      - linux-headers-generic
install:
  - echo "Don't do npm-install until after generating the syscalls"
script:
  - node ./syscall_tbl/syscall.js /usr/src/linux-headers-* > ./syscall_autogenerated.h
  - CC=gcc npm install --verbose
  - node ./hello.js
  - npm run-script lint:js # code quality check
  - npm run-script flow # code quality check
